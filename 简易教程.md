# 简单解释

链接：https://www.zhihu.com/question/419613516/answer/2382784679

来源：知乎

Keycloak 是一个针对现代应用程序和服务的开源身份和访问管理解决方案。Keycloak 支持单点登录（Single-Sign On），因此服务可以通过 OpenID Connect、OAuth 2.0 等协议对接 Keycloak。同时 Keycloak 也支持集成不同的身份认证服务，例如 Github、Google 和 Facebook 等。

另外 Keycloak 也支持用户联邦功能，可以通过 LDAP 或 Kerberos 来导入用户。更多 Keycloak 内容可以参考官方文档介绍。

目前在 Apache APISIX 中，已支持使用 OpenID-Connect 协议和 Keycloak 进行身份认证。通过对接 Keycloak，Apache APISIX 仅需通过配置即可实现对使用者和应用服务进行认证与鉴权，从而大大减少了相关开发工作。

以下是具体操作：

# 如何使用

# 环境准备

在进行如下步骤前，请确保环境中已启动 Apache APISIX。

# 启动 Keycloak

这里我们使用 docker-compose 将 Keycloak 与其所依赖的的 PostgreSQL 一并启动。

# 配置 Keycloak
Keycloak 启动完成之后，使用浏览器访问 "http://127.0.0.1:8080/auth/admin/" ，并键入 admin/password 账号密码进行登录管理员控制台。

# 创建 realm

首先，创建一个名称为 apisix_test_realm的 realm。在 Keycloak 中，realm 是一个专门用来管理项目的工作区，不同 realm之间的资源是相互隔离的。

Keycloak 中 realm 分为两类 : 一类是 master realm，由 Keycloak 刚启动时创建，用于管理 admin 账号以及创建其他的 realm。第二类是 other realm, 由 master realm 中的 admin 创建，可以在该 realm 中进行用户和应用的创建并进行管理和使用。更多细节可参考 Keycloak 中 realm 和 users 相关内容。

